# Architecture Diagrams - Integrated Setup

## ??? System Architecture

### Development Mode Flow

```
??????????????????????????????????????????????????????????????????????
?                         DEVELOPER                                  ?
?                                                                    ?
?  1. Runs: dotnet run                                              ?
?  2. Opens: http://localhost:5274                                  ?
??????????????????????????????????????????????????????????????????????
                                ?
                                ?
??????????????????????????????????????????????????????????????????????
?                    BROWSER (localhost:5274)                        ?
?                                                                    ?
?  ????????????????????????????????????????????????????????????   ?
?  ?  Vue 3 Application                                        ?   ?
?  ?  • Hot Module Reload                                      ?   ?
?  ?  • Instant Updates                                        ?   ?
?  ?  • TypeScript                                             ?   ?
?  ????????????????????????????????????????????????????????????   ?
??????????????????????????????????????????????????????????????????????
                                ?
                                ?
??????????????????????????????????????????????????????????????????????
?              .NET APPLICATION (Port 5274)                          ?
?                                                                    ?
?  ?????????????????????????  ????????????????????????????????    ?
?  ?   SignalR Hub         ?  ?   SPA Proxy Middleware       ?    ?
?  ?                       ?  ?                              ?    ?
?  ?  • Real-time comm     ?  ?  Proxy Target:              ?    ?
?  ?  • WebSocket          ?  ?  http://localhost:3000      ?    ?
?  ?  • /videocallhub      ?  ?                              ?    ?
?  ?????????????????????????  ????????????????????????????????    ?
?                                             ?                     ?
?????????????????????????????????????????????????????????????????????
                                              ?
                                              ? Proxies UI requests
                                              ?
??????????????????????????????????????????????????????????????????????
?              VITE DEV SERVER (Port 3000)                           ?
?                                                                    ?
?  • Serves Vue application                                         ?
?  • Hot Module Reload                                              ?
?  • Fast refresh                                                   ?
?  • Source maps                                                    ?
?                                                                    ?
?  Auto-started by .NET app                                         ?
??????????????????????????????????????????????????????????????????????
```

---

### Production Mode Flow

```
??????????????????????????????????????????????????????????????????????
?                         USER                                       ?
?                                                                    ?
?  Opens: https://yourdomain.com                                    ?
??????????????????????????????????????????????????????????????????????
                                ?
                                ?
??????????????????????????????????????????????????????????????????????
?                    BROWSER                                         ?
?                                                                    ?
?  ????????????????????????????????????????????????????????????   ?
?  ?  Vue 3 Application (Minified & Bundled)                  ?   ?
?  ?  • Optimized for production                              ?   ?
?  ?  • Tree-shaken                                            ?   ?
?  ?  • Compressed                                             ?   ?
?  ????????????????????????????????????????????????????????????   ?
??????????????????????????????????????????????????????????????????????
                                ?
                                ?
??????????????????????????????????????????????????????????????????????
?              .NET APPLICATION (Production Server)                  ?
?                                                                    ?
?  ?????????????????????????  ????????????????????????????????    ?
?  ?   SignalR Hub         ?  ?   Static File Middleware     ?    ?
?  ?                       ?  ?                              ?    ?
?  ?  • Real-time comm     ?  ?  Serves from:               ?    ?
?  ?  • WebSocket          ?  ?  wwwroot/dist/              ?    ?
?  ?  • /videocallhub      ?  ?                              ?    ?
?  ?                       ?  ?  • index.html               ?    ?
?  ?                       ?  ?  • *.js (bundled)           ?    ?
?  ?                       ?  ?  • *.css (minified)         ?    ?
?  ?????????????????????????  ????????????????????????????????    ?
?                                                                    ?
?  Single server serving everything                                 ?
??????????????????????????????????????????????????????????????????????
```

---

## ?? Request Flow

### Development Request Flow

```
1. Browser Request
   ?
   ?
2. http://localhost:5274/
   ?
   ?
3. .NET App receives request
   ?
   ???? Is it /videocallhub? ????? YES ??? SignalR Hub handles it
   ?
   ???? Is it UI request? ????? YES ??? SPA Proxy Middleware
                                         ?
                                         ?
                                    4. Proxy to localhost:3000
                                         ?
                                         ?
                                    5. Vite Dev Server
                                         ?
                                         ?
                                    6. Returns Vue app
                                         ?
                                         ?
                                    7. Back to browser
```

### Production Request Flow

```
1. Browser Request
   ?
   ?
2. https://yourdomain.com/
   ?
   ?
3. .NET App receives request
   ?
   ???? Is it /videocallhub? ????? YES ??? SignalR Hub handles it
   ?
   ???? Is it UI request? ????? YES ??? Static File Middleware
                                         ?
                                         ?
                                    4. Serve from wwwroot/dist/
                                         ?
                                         ?
                                    5. Return cached static files
                                         ?
                                         ?
                                    6. Back to browser
```

---

## ?? Build Process

### Development Build

```
???????????????????
?  dotnet build   ?
???????????????????
         ?
         ?
????????????????????????????????????
?  1. Check Node.js installed      ?
????????????????????????????????????
         ?
         ?
????????????????????????????????????
?  2. npm install (if needed)      ?
????????????????????????????????????
         ?
         ?
????????????????????????????????????
?  3. Build .NET project           ?
????????????????????????????????????
         ?
         ?
????????????????????????????????????
?  ? Ready for dotnet run          ?
????????????????????????????????????
```

### Production Build

```
????????????????????????????
?  dotnet publish -c       ?
?  Release                 ?
????????????????????????????
          ?
          ?
???????????????????????????????????????
?  1. npm install (if needed)         ?
???????????????????????????????????????
          ?
          ?
???????????????????????????????????????
?  2. npm run build                   ?
?     (Vue ? wwwroot/dist)            ?
???????????????????????????????????????
          ?
          ?
???????????????????????????????????????
?  3. Build .NET (Release)            ?
???????????????????????????????????????
          ?
          ?
???????????????????????????????????????
?  4. Copy all to ./publish/          ?
?     • .NET DLLs                     ?
?     • wwwroot/dist files            ?
?     • Dependencies                  ?
???????????????????????????????????????
          ?
          ?
???????????????????????????????????????
?  ? Ready to deploy                  ?
???????????????????????????????????????
```

---

## ??? File Structure

```
VideoChatingApp.WebRTC/
?
??? client-app/                      ?? Vue Application
?   ??? src/                         
?   ?   ??? components/              
?   ?   ??? services/                
?   ?   ??? views/                   
?   ?   ??? main.ts                  ?? Vue Entry Point
?   ?
?   ??? package.json                 ?? npm Dependencies
?   ??? vite.config.ts              ??  Vite Configuration
?   ??? node_modules/               ?? Installed Packages
?
??? wwwroot/                         ?? Static Files
?   ??? dist/                        ?? Vue Build Output
?       ??? index.html               
?       ??? assets/                  
?           ??? *.js                 
?           ??? *.css                
?
??? Core/                            ?? .NET Core Logic
?   ??? Interfaces/
?   ??? Models/
?
??? Hubs/                            ?? SignalR Hubs
?   ??? VideoCallHub.cs             ?? Real-time Hub
?
??? Managers/                        ?? Business Logic
?   ??? UserManager.cs
?   ??? RoomManager.cs
?
??? Program.cs                       ?? .NET Entry Point
?                                       ?? SPA Proxy (Dev)
?                                       ?? Static Files (Prod)
?
??? VideoChatingApp.WebRTC.csproj   ??  Project Configuration
?                                       ?? SPA Settings
?                                       ?? Auto npm install
?                                       ?? Auto Vue build
?
??? Documentation/
    ??? INTEGRATED_DEVELOPMENT_GUIDE.md
    ??? QUICKSTART_INTEGRATED.md
    ??? READY_TO_USE.md
```

---

## ?? Component Interaction

```
????????????????????????????????????????????????????????????????
?                      Vue Components                          ?
?                                                              ?
?  ??????????????  ??????????????  ???????????????          ?
?  ? VideoChat  ?  ? UserList   ?  ? VideoGrid   ?          ?
?  ??????????????  ??????????????  ???????????????          ?
?         ?               ?                ?                  ?
?         ??????????????????????????????????                  ?
?                         ?                                    ?
????????????????????????????????????????????????????????????????
                          ?
                          ?
????????????????????????????????????????????????????????????????
?                   Vue Services Layer                         ?
?                                                              ?
?  ??????????????????????      ??????????????????????        ?
?  ?  SignalR Service   ????????  WebRTC Service    ?        ?
?  ?                    ?      ?                    ?        ?
?  ?  • Hub connection  ?      ?  • Peer connections?        ?
?  ?  • Event handlers  ?      ?  • Media streams   ?        ?
?  ??????????????????????      ??????????????????????        ?
?            ?                                                 ?
????????????????????????????????????????????????????????????????
             ?
             ? WebSocket
             ?
????????????????????????????????????????????????????????????????
?              .NET Backend (SignalR Hub)                      ?
?                                                              ?
?  ??????????????????????      ??????????????????????        ?
?  ?  VideoCallHub      ????????  User Manager      ?        ?
?  ?                    ?      ?                    ?        ?
?  ?  • Call signaling  ?      ?  • User tracking   ?        ?
?  ?  • ICE candidates  ?      ?  • Connection mgmt ?        ?
?  ?  • Room management ?      ??????????????????????        ?
?  ??????????????????????                                     ?
?            ?                                                 ?
?            ?                                                 ?
?  ??????????????????????                                     ?
?  ?  Room Manager      ?                                     ?
?  ?                    ?                                     ?
?  ?  • Room creation   ?                                     ?
?  ?  • Participant mgmt?                                     ?
?  ??????????????????????                                     ?
?                                                              ?
????????????????????????????????????????????????????????????????
```

---

## ?? Development Lifecycle

```
???????????????????????????????????????????????????????????????
?                    DEVELOPMENT CYCLE                        ?
???????????????????????????????????????????????????????????????

Start
  ?
  ?
????????????????????
?  dotnet run      ? ????????????????
????????????????????                ?
         ?                           ?
         ?                           ?
?????????????????????????????????????
?  1. Check Node.js                ??
?  2. Install npm packages         ??
?  3. Build .NET                   ??
?  4. Start .NET server (5274)    ??
?  5. Auto-start Vite (3000)      ??
?????????????????????????????????????
         ?                           ?
         ?                           ?
?????????????????????????????????????
?  Browser opens to:               ??
?  http://localhost:5274           ??
?????????????????????????????????????
         ?                           ?
         ?                           ?
?????????????????????????????????????
?  Make changes:                   ??
?                                  ??
?  Vue Files                       ??
?  ?? Save                        ??
?  ?? ? Hot reload (instant)      ??
?                                  ??
?  C# Files                        ??
?  ?? Save                        ??
?  ?? Stop (Ctrl+C)               ??
?  ?? ??????????????????????????????
?                                   ?
?????????????????????????????????????

Production Deployment
  ?
  ?
????????????????????????????????????
?  dotnet publish -c Release       ?
????????????????????????????????????
         ?
         ?
????????????????????????????????????
?  Deploy to server                ?
?  • All files in ./publish/       ?
?  • Vue app pre-built             ?
?  • Single server                 ?
????????????????????????????????????
```

---

## ?? Key Benefits Visualization

```
???????????????????????????????????????????????????????????????
?                      BEFORE                                 ?
???????????????????????????????????????????????????????????????
?                                                             ?
?  Terminal 1:  cd client-app && npm run dev                 ?
?               ?                                             ?
?               Vue Dev Server (3000)                         ?
?                                                             ?
?  Terminal 2:  dotnet run                                   ?
?               ?                                             ?
?               .NET Server (5274)                           ?
?                                                             ?
?  Browser:     Multiple URLs                                ?
?               • localhost:3000 (Vue)                       ?
?               • localhost:5274 (API)                       ?
?               • CORS issues                                ?
?                                                             ?
???????????????????????????????????????????????????????????????

                         ??  Integrated  ??

???????????????????????????????????????????????????????????????
?                      AFTER                                  ?
???????????????????????????????????????????????????????????????
?                                                             ?
?  Terminal 1:  dotnet run                                   ?
?               ?                                             ?
?               • .NET Server (5274)                         ?
?               • Auto-starts Vue (3000)                     ?
?               • Proxies requests                           ?
?                                                             ?
?  Browser:     Single URL                                   ?
?               • localhost:5274 only                        ?
?               • No CORS issues                             ?
?               • Hot reload works                           ?
?                                                             ?
???????????????????????????????????????????????????????????????
```

---

## ?? Performance Flow

```
Development (Hot Reload)
??????????????????????????
Edit Vue File
     ?
     ?
Save (Ctrl+S)
     ?
     ?
Vite detects change
     ?
     ?
Hot Module Reload
     ?
     ?
Browser updates
     ?
     ?
??  < 1 second


Production (Optimized)
??????????????????????????
Request to /
     ?
     ?
.NET serves cached file
     ?
     ?
Browser renders
     ?
     ?
??  < 100ms
```

---

*These diagrams illustrate the integrated architecture of your .NET + Vue application.* ??
